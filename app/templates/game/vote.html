{# templates/game/vote.html #}
<div class="bg-white bg-opacity-70 backdrop-filter backdrop-blur-xl p-8 rounded-2xl 
            border border-gray-200 border-opacity-50 shadow-2xl">
  <h3 class="text-2xl font-bold mb-8 text-gray-800">投票</h3>
  <div class="space-y-8">
    <div class="grid grid-cols-2 gap-8">
      <div class="bg-white bg-opacity-50 backdrop-filter backdrop-blur-md p-6 rounded-xl 
                  border border-gray-200 border-opacity-30 shadow-lg">
        <label for="vote1" class="block text-sm font-medium text-gray-700 mb-3">1人目の投票先</label>
        <select id="vote1" 
                class="w-full bg-white bg-opacity-50 backdrop-filter backdrop-blur-sm 
                       border border-gray-300 border-opacity-50 rounded-lg p-3
                       focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-opacity-50
                       focus:border-blue-500 focus:border-opacity-50
                       text-gray-700">
          <option value="">選択してください</option>
          {% for player in room.players %}
            <option value="{{ player.user_id }}">{{ player.nickname }}</option>
          {% endfor %}
        </select>
      </div>
      <div class="bg-white bg-opacity-50 backdrop-filter backdrop-blur-md p-6 rounded-xl 
                  border border-gray-200 border-opacity-30 shadow-lg">
        <label for="vote2" class="block text-sm font-medium text-gray-700 mb-3">2人目の投票先</label>
        <select id="vote2" 
                class="w-full bg-white bg-opacity-50 backdrop-filter backdrop-blur-sm 
                       border border-gray-300 border-opacity-50 rounded-lg p-3
                       focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-opacity-50
                       focus:border-blue-500 focus:border-opacity-50
                       text-gray-700">
          <option value="">選択してください</option>
          {% for player in room.players %}
            <option value="{{ player.user_id }}">{{ player.nickname }}</option>
          {% endfor %}
        </select>
      </div>
    </div>
    <div class="flex justify-end">
      <button 
        onclick="submitVote()"
        class="bg-blue-600 bg-opacity-90 text-white px-8 py-4 rounded-lg 
               hover:bg-blue-700 hover:bg-opacity-90 
               transition-all duration-200 transform hover:scale-[1.02] 
               backdrop-filter backdrop-blur-sm 
               border border-blue-500 border-opacity-30 shadow-lg text-lg"
      >
        投票する
      </button>
    </div>
  </div>
</div>

<script>
function submitVote() {
  const vote1 = document.getElementById('vote1').value;
  const vote2 = document.getElementById('vote2').value;

  if (!vote1 || !vote2) {
    alert('両方の投票先を選択してください');
    return;
  }

  if (vote1 === vote2) {
    alert('同じプレイヤーに投票することはできません');
    return;
  }

  socket.emit('submit_vote', {
    room_id: roomId,
    vote1: vote1,
    vote2: vote2
  });
}
</script> 